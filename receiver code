ESP32 Boat Motor Controller with Telemetry Feedback (ESP-NOW)
This firmware runs on the boatâ€™s ESP32 and controls two motors based on joystick commands received wirelessly from a handheld transmitter over ESP-NOW. It also sends telemetry data back to the transmitter, including:

ðŸ“¡ RSSI (signal strength) of the incoming link from the transmitter

ðŸ”‹ Boat battery voltage in millivolts

Features
Dual-motor control with separate PWM and direction pins for each axis

Automatic safety stop â€” if no command is received within a set timeout, both motors are stopped

Bi-directional ESP-NOW communication â€” receives control commands and sends back telemetry in the format:

Copy
Edit
rssi,boatBatt_mV
RSSI monitoring via Wi-Fi promiscuous mode for accurate link quality readings

Battery voltage measurement using a resistive divider on the VP (GPIO36) pin

Optional motor inversion settings for flexible wiring

Hardware Requirements
ESP32 development board on the boat

Motor driver connected to PWM + direction pins:

Motor A (Y-axis): PWM on GPIO19, DIR on GPIO18

Motor B (X-axis): PWM on GPIO5, DIR on GPIO4

Voltage divider (20k + 10k) connected to boatâ€™s battery and VP pin (GPIO36) for voltage sensing

Matching handheld transmitter ESP32 with joystick and OLED

Data Flow
Transmitter â†’ Boat
Sends CSV string "cmdX,cmdY" representing mapped joystick control values (âˆ’255 to +255).

Boat â†’ Transmitter
Sends CSV string "rssi,boatBatt_mV" with current link RSSI (in dBm) and boat battery voltage (in mV).

Safety Features
Stops motors after 300 ms of no received commands to prevent runaway operation.

PWM duty limited to 254 max to avoid 100% duty cycle glitches.

Usage
Flash this firmware to your boat ESP32.

Update TRANSMITTER_MAC to match the handheldâ€™s STA MAC address.

Power on both devices â€” joystick movement on the transmitter will control the boat, and battery/RSSI telemetry will be sent back.
